<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web interface for Raspberry Pi audio encoder - stream audio to SRT servers">
    <title>ZuidWest FM Encoder</title>
    <link rel="canonical" href="/">
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.3/dist/cdn.min.js" defer="defer"></script>
</head>
<body x-data="encoderApp()" x-cloak>
    <script>
        const mq = window.matchMedia('(prefers-color-scheme: dark)');
        if (mq.matches) document.documentElement.classList.add('dark');
        mq.addEventListener('change', e => document.documentElement.classList.toggle('dark', e.matches));
    </script>
    <main class="container">
        <!-- Dashboard View -->
        <div id="dashboard-view" x-show="view === 'dashboard'" x-transition:enter.duration.200ms>
            <header>
                <h1>ZuidWest FM Encoder</h1>
                <div class="header-controls">
                    <button class="icon-btn icon-btn--settings" id="settings-btn" type="button" title="Settings" @click="showSettings()">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                    <div id="status-pill" :class="statusPillClass">
                        <span id="status-dot" :class="{ 'animate-pulse': encoder.state === 'running' || encoder.state === 'starting' }"></span>
                        <span id="status-text" x-text="encoder.state.charAt(0).toUpperCase() + encoder.state.slice(1)"></span>
                    </div>
                </div>
            </header>

            <div class="upgrade-banner" id="upgrade-banner" x-show="version.updateAvail && version.latest" x-cloak>
            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
            </svg>
            <span>Update available: <strong x-text="version.latest"></strong></span>
            <a rel="noopener" href="https://github.com/oszuidwest/zwfm-encoder/releases" title="View release on GitHub" target="_blank">View release</a>
        </div>

        <section class="card">
            <div class="card-header brand">
                <h2>Audio Source</h2>
                <span class="badge">Input</span>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="audio-input">Input Device</label>
                    <select id="audio-input" x-model="settings.audioInput" @change="send('update_settings', null, { audio_input: settings.audioInput })">
                        <template x-if="devices.length === 0">
                            <option value="">No devices found</option>
                        </template>
                        <template x-for="device in devices" :key="device.id">
                            <option :value="device.id" x-text="device.name"></option>
                        </template>
                    </select>
                </div>

                <div id="vu-meter">
                    <div class="vu-header">
                        <button class="vu-mode-btn" id="vu-mode-toggle" type="button" @click="toggleVuMode()" x-text="vuMode === 'peak' ? 'Peak' : 'RMS'"></button>
                        <div class="vu-indicators">
                            <span class="vu-indicator" id="silence-alert"><span class="indicator-dot silence" :class="levels.silence_level"></span>Silence</span>
                            <span class="vu-indicator" id="clip-alert"><span class="indicator-dot clip" :class="{ active: clipActive }"></span>Clip</span>
                        </div>
                    </div>
                    <div class="vu-channel">
                        <span class="vu-label">L</span>
                        <div class="vu-track">
                            <div class="vu-gradient"></div>
                            <div class="vu-cover" :style="{ width: `${100 - dbToPercent(vuMode === 'peak' ? levels.peak_left : levels.left)}%` }"></div>
                            <div class="vu-peak" :style="{ left: `${dbToPercent(levels.peak_left)}%` }" :class="{ visible: dbToPercent(levels.peak_left) > 0 }"></div>
                        </div>
                        <span class="vu-db" x-text="`${(vuMode === 'peak' ? levels.peak_left : levels.left).toFixed(1)} dB`"></span>
                    </div>
                    <div class="vu-channel">
                        <span class="vu-label">R</span>
                        <div class="vu-track">
                            <div class="vu-gradient"></div>
                            <div class="vu-cover" :style="{ width: `${100 - dbToPercent(vuMode === 'peak' ? levels.peak_right : levels.right)}%` }"></div>
                            <div class="vu-peak" :style="{ left: `${dbToPercent(levels.peak_right)}%` }" :class="{ visible: dbToPercent(levels.peak_right) > 0 }"></div>
                        </div>
                        <span class="vu-db" x-text="`${(vuMode === 'peak' ? levels.peak_right : levels.right).toFixed(1)} dB`"></span>
                    </div>
                    <div class="vu-scale">
                        <span class="mark-60">-60</span>
                        <span class="mark-48">-48</span>
                        <span class="mark-24">-24</span>
                        <span class="mark-12">-12</span>
                        <span class="mark-6">-6</span>
                        <span class="mark-0">0</span>
                    </div>
                </div>

                <div class="alert-box" id="source-status" x-show="hasSourceIssue" x-cloak>
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    <div>
                        <span x-text="encoder.sourceRetryCount > 0 ? `Retry ${encoder.sourceRetryCount}/${encoder.sourceMaxRetries}` : 'Error'"></span>
                        <p x-show="encoder.lastError" x-text="encoder.lastError"></p>
                    </div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="card-header slate">
                <h2>Outputs</h2>
                <div class="header-actions">
                    <span class="badge" x-text="outputs.length"></span>
                    <button class="btn-add" id="add-btn" type="button" @click="showAddOutput()">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
                        Add
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="outputs-list">
                    <template x-for="output in outputs" :key="output.id">
                        <div class="output-item" :class="{ deleting: deletingOutputs[output.id] === output.created_at }">
                            <div class="output-row">
                                <span class="output-dot" :class="getOutputStateClass(output)"></span>
                                <span class="output-host" x-text="`${output.host}:${output.port}`"></span>
                                <button class="icon-btn icon-btn--delete" type="button" title="Delete"
                                        @click="deleteOutput(output.id)"
                                        :disabled="deletingOutputs[output.id] === output.created_at">
                                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg>
                                </button>
                            </div>
                            <div class="output-details">
                                <span class="output-codec" x-text="output.codec.toUpperCase()"></span>
                                <span class="output-streamid" x-text="`#${output.streamid}`"></span>
                                <span class="output-status" :class="getOutputStateClass(output)" x-text="getOutputStatusText(output)"></span>
                            </div>
                            <p class="output-error" x-show="shouldShowError(output)" x-text="outputStatuses[output.id]?.last_error"></p>
                        </div>
                    </template>
                </div>
            </div>
        </section>

            <footer>
                <div>
                    <a rel="noopener" href="https://github.com/oszuidwest/zwfm-encoder" title="View source on GitHub" target="_blank">
                        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/></svg>
                        GitHub
                    </a>
                    <span class="sep">|</span>
                    <span>Version <span id="version">{{VERSION}}</span></span>
                </div>
                <div class="copyright">© {{YEAR}} Streekomroep ZuidWest • MIT License</div>
            </footer>
        </div>

        <!-- Settings View -->
        <div id="settings-view" x-show="view === 'settings'" x-transition:enter.duration.200ms x-cloak>
            <header class="settings-header">
                <button class="settings-back" id="settings-back" type="button" @click="showDashboard()">
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/></svg>
                    <span>Back</span>
                </button>
                <h1>Settings</h1>
                <div class="settings-header-spacer"></div>
            </header>

            <nav class="settings-tabs">
                <button class="settings-tab" type="button" @click="showTab('audio')" :class="{ active: settingsTab === 'audio' }">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"/></svg>
                    <span>Audio</span>
                </button>
                <button class="settings-tab" type="button" @click="showTab('alerts')" :class="{ active: settingsTab === 'alerts' }">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"/></svg>
                    <span>Alerts</span>
                </button>
                <button class="settings-tab" type="button" @click="showTab('about')" :class="{ active: settingsTab === 'about' }">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"/></svg>
                    <span>About</span>
                </button>
            </nav>

            <div class="settings-panels" id="settings-panels">
                <!-- Audio Panel -->
                <div class="settings-panel" id="panel-audio" x-show="settingsTab === 'audio'">
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"/></svg>
                            <h3>Silence Detection</h3>
                        </div>
                        <p class="settings-section-desc">Alert when audio drops below threshold for extended periods.</p>
                        <div class="form-group">
                            <label for="silence-threshold">Threshold</label>
                            <div class="input-with-unit">
                                <input id="silence-threshold" type="number" max="0" min="-60" step="1" x-model.number="settings.silenceThreshold" @change="updateSilenceThreshold()">
                                <span class="input-unit">dB</span>
                            </div>
                            <span class="input-hint">Audio below this level is considered silence</span>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="silence-duration">Alert after</label>
                                <div class="input-with-unit">
                                    <input id="silence-duration" type="number" max="300" min="1" step="1" x-model.number="settings.silenceDuration" @change="updateSilenceDuration()">
                                    <span class="input-unit">sec</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="silence-recovery">Recover after</label>
                                <div class="input-with-unit">
                                    <input id="silence-recovery" type="number" max="60" min="1" step="1" x-model.number="settings.silenceRecovery" @change="updateSilenceRecovery()">
                                    <span class="input-unit">sec</span>
                                </div>
                            </div>
                        </div>
                        <span class="input-hint">Silence triggers alerts; recovery clears after audio returns</span>
                    </div>
                </div>

                <!-- Alerts Panel -->
                <div class="settings-panel" id="panel-alerts" x-show="settingsTab === 'alerts'">
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"/></svg>
                            <h3>Webhook</h3>
                        </div>
                        <p class="settings-section-desc">POST request sent when silence is detected.</p>
                        <div class="form-group">
                            <label for="silence-webhook">Webhook URL</label>
                            <input id="silence-webhook" type="url" placeholder="https://hooks.example.com/..." x-model="settings.silenceWebhook" @blur="updateSilenceWebhook()">
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"/></svg>
                            <h3>Email Alerts</h3>
                        </div>
                        <p class="settings-section-desc">Email notifications when silence is detected.</p>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email-smtp-host">SMTP Server</label>
                                <input id="email-smtp-host" type="text" placeholder="smtp.example.com" x-model="settings.email.host" @blur="saveEmailSettings()">
                            </div>
                            <div class="form-group">
                                <label for="email-smtp-port">Port</label>
                                <input id="email-smtp-port" type="number" max="65535" min="1" x-model.number="settings.email.port" @blur="saveEmailSettings()">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email-username">Username / From</label>
                            <input id="email-username" type="email" placeholder="alerts@example.com" x-model="settings.email.username" @blur="saveEmailSettings()">
                        </div>
                        <div class="form-group">
                            <label for="email-password">Password</label>
                            <input id="email-password" type="password" placeholder="SMTP password" @blur="saveEmailSettings()">
                            <span class="input-hint">Leave empty to keep existing password</span>
                        </div>
                        <div class="form-group">
                            <label for="email-recipients">Recipients</label>
                            <input id="email-recipients" type="text" placeholder="admin@example.com, tech@example.com" x-model="settings.email.recipients" @blur="saveEmailSettings()">
                            <span class="input-hint">Comma-separated email addresses</span>
                        </div>
                        <button class="btn secondary" id="email-test" type="button" @click="sendTestEmail()" :disabled="emailTestPending" x-text="emailTestText">Send Test Email</button>
                    </div>
                </div>

                <!-- About Panel -->
                <div class="settings-panel" id="panel-about" x-show="settingsTab === 'about'">
                    <div class="settings-section about-section">
                        <div class="about-logo">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M3.75 7.5l8.25-4.5 8.25 4.5m-16.5 0v9l8.25 4.5m-8.25-13.5l8.25 4.5m8.25-4.5v9l-8.25 4.5m8.25-13.5l-8.25 4.5m0 0v9"/></svg>
                            <h2>ZuidWest FM Encoder</h2>
                        </div>
                        <div class="about-info">
                            <dl class="about-list">
                                <dt>Version</dt>
                                <dd id="about-version" x-text="version.current || 'dev'">-</dd>
                                <dt>Commit</dt>
                                <dd id="about-commit" x-text="version.commit || 'unknown'">-</dd>
                                <dt>Platform</dt>
                                <dd id="about-platform" x-text="settings.platform || '-'">-</dd>
                                <dt>Uptime</dt>
                                <dd id="about-uptime" x-text="encoder.uptime || '-'">-</dd>
                            </dl>
                        </div>
                        <div class="about-links">
                            <a rel="noopener" href="https://github.com/oszuidwest/zwfm-encoder" title="View source code on GitHub" target="_blank">
                                <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/></svg>
                                GitHub
                            </a>
                            <a rel="noopener" href="https://github.com/oszuidwest/zwfm-encoder/issues" title="Report bugs or request features" target="_blank">
                                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0112 12.75zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 01-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 002.248-2.354M12 12.75a2.25 2.25 0 01-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 00-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 01.4-2.253M12 8.25a2.25 2.25 0 00-2.248 2.146M12 8.25a2.25 2.25 0 012.248 2.146M8.683 5a6.032 6.032 0 01-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0115.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 00-.575-1.752M4.921 6a24.048 24.048 0 00-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 01-5.223 1.082"/></svg>
                                Report Issue
                            </a>
                            <a rel="noopener" href="https://github.com/oszuidwest/zwfm-encoder/releases" title="View release history and downloads" target="_blank">
                                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"/></svg>
                                Releases
                            </a>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg>
                            <h3>License</h3>
                        </div>
                        <p class="about-license">MIT License &mdash; Streekomroep ZuidWest</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Output View -->
        <div id="add-output-view" x-show="view === 'add-output'" x-transition:enter.duration.200ms x-cloak>
            <header class="settings-header">
                <button class="settings-back" type="button" @click="showDashboard()">
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/></svg>
                    <span>Back</span>
                </button>
                <h1>New Output</h1>
                <div class="settings-header-spacer"></div>
            </header>

            <div class="settings-panels">
                <div class="settings-panel">
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M5.25 14.25h13.5m-13.5 0a3 3 0 01-3-3m3 3a3 3 0 100 6h13.5a3 3 0 100-6m-16.5-3a3 3 0 013-3h13.5a3 3 0 013 3m-19.5 0a4.5 4.5 0 01.9-2.7L5.737 5.1a3.375 3.375 0 012.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 01.9 2.7m0 0a3 3 0 01-3 3m0 3h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008zm-3 6h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008z"/></svg>
                            <h3>Server Connection</h3>
                        </div>
                        <p class="settings-section-desc">Configure the SRT server to stream audio to.</p>
                        <div class="form-group">
                            <label for="new-host">Server</label>
                            <input id="new-host" type="text" placeholder="stream.example.com" x-model="newOutput.host">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="new-port">Port</label>
                                <input id="new-port" type="number" x-model.number="newOutput.port">
                            </div>
                            <div class="form-group">
                                <label for="new-streamid">Stream ID</label>
                                <input id="new-streamid" type="text" placeholder="studio" x-model="newOutput.streamid">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="new-password">Password</label>
                            <input id="new-password" type="password" placeholder="optional" x-model="newOutput.password">
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                            <h3>Encoding</h3>
                        </div>
                        <p class="settings-section-desc">Audio encoding format and retry settings.</p>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="new-codec">Codec</label>
                                <select id="new-codec" x-model="newOutput.codec">
                                    <option value="mp3">MP3 (320 kbit/s)</option>
                                    <option value="mp2">MP2 (384 kbit/s)</option>
                                    <option value="ogg">OGG Vorbis (Q10)</option>
                                    <option value="wav">WAV (uncompressed)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="new-retries">Max Retries</label>
                                <input id="new-retries" type="number" max="9999" min="1" x-model.number="newOutput.max_retries">
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn secondary" type="button" @click="showDashboard()">Cancel</button>
                        <button class="btn primary" type="button" @click="submitNewOutput()">Add Output</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="/app.js"></script>
</body>
</html>
